Faydark : Taverns
Celtic Trinity Studios
KaelKodes
C# Godot 4.5
-=-=-=-=-=-=-=-=-

**Faydark Taverns v0.9.34 Pantry UI and QuickMenu Framework**
Added:
Pantry UI

Started:
QuickMenu

TODO:
Finish QuickMenu


**Faydark Taverns v0.9.331 Bug Fixes**
Fixed:
NPC States


**Faydark Taverns v0.9.33 NPC Stat and Quest Update**
Updated:
NPC Stats
Quests
Quest Simulation

Added:
Inventory Groundwork
Cookbook Groundwork

To Do:
Add Food/Drink Selection UI
Finish Groundwork


-=-=-=-=-=-=-=-=-


**Faydark Taverns v0.9.32 Hunger and Thirst!**
Updated:
Guest Stats
Guest Skills
Guest Favorites and Hated
Table Data Flow

Added:
Hunger and Thirst Bubbles
H/T System
Food and Drink Initial Menu


To Do:
Update Quests
Update Quest Simulator
Add Food/Drink Selection UI
Add Food/Drink


-=-=-=-=-=-=-=-=-


**Faydark Taverns v0.9.31 MUSIC**
Added:
Basic Music Loop
Volume Sliders
WeatherDB


-=-=-=-=-=-=-=-=-


**Faydark Taverns v0.9.3 — “Guests Behaving Realistically”**
Release Date: July 11, 2025

**✨ Major Systems Overhaul: Guest Flow Logic**
✅ Fully centralized NPC guest lifecycle
Guests now follow a consistent flow: generated → queued → arrive → enter → linger → depart — all managed through GuestManager.

🧠 Guest timing and behavior stabilized

VisitHour, WaitDuration, and TavernLingerTime now work reliably

No more guests teleporting into the tavern or becoming immortal

⏳ Timer-based departure system

Guests now leave exactly when scheduled using TimerManager

TickGuests() logic no longer handles guest exits, reducing redundancy and CPU cost

**🛠️ Core Behavior Updates**
📈 Renown-based linger bonus added
Higher tavern renown now makes guests stay longer (up to +50% linger time)

📅 Guests now arrive gradually over time
No more instant mob spawning — guests trickle in based on their VisitHour

🍺 Last Call and Tavern Close messages fire once per day
Prevented excessive logging and duplicate midnight kicks

🪑 Clean separation between visual/UI logic and simulation
Improved modularity between GuestManager, TavernManager, and UI panels

**🐛 Bug Fixes**
Fixed: Guests leaving multiple times

Fixed: DepartureTime being set in hours instead of minutes (caused 2-day visits)

Fixed: Quest givers triggering seat logic and soft-locking visual flow

Fixed: Guests stuck in Elsewhere never arriving on screen

Fixed: Guests never departing if missed by TickGuests() loop

===========================================
**Faydark Taverns v0.9.2**

First public internal build / Feature Summary \& Patch Notes


**✨ Core Features**

🏰 **Tavern Management**

Fully functional tavern environment with dynamic guest flow.

Expandable floor capacity.

Active guest admission and seating system.

Automatic guest departure based on conditions (length of stay, full tavern, closing time).

Clean debug logging system (GameLog) for in-world narration and feedback.


📋 **Quest System**

QuestBoard supports assigning adventurers to procedurally generated quests.

Quest slots are limited, with the ability to expand via upgrades.

Adventurers return dynamically after completing quests, reclaiming floor space or waiting outside.

Tracking for accepted, completed, and failed quests is now live.

🪑 F**urniture \& Tables**

Purchasable tables via the shop interface, with types like:

Starting Table (2-seat)

Tiny, Small, Medium, and Large Tables (2–8 seats)

Each table has a seat count and is tracked by type with individual caps.

Seat caps are enforced in both shop UI and cart logic.


🛒 **Shop System**

Multi-tabbed shop interface for:

Tables

Decorations

Supplies (placeholder)

Upgrades

Dynamic shop filtering by category.

Level-based item unlocking.

Cart-based purchase flow with gold total and item removal.

Dynamic per-item limits and Tavern Level gating.

Each item includes cost, level requirement, description, and tooltip feedback.


🔧 **Upgrade System**

Upgrades now available in the Upgrades tab include:

Increase Floor Cap – Add +1 guest capacity.

Increase Quest Cap – Add +1 quest slot.

Upgrade Tavern Sign – Renown boost.

Unlock Oven – Enables future food sales. WIP

Unlock Keg Stand – Enables future drink sales. WIP

Unlock Lodging (Future Feature) – Foundation laid for guest stays and rooms.


📊 **TavernStats System**

Tracks:

Level, EXP, Renown

Guest floor cap

Table caps per type

Upgrades unlocked

Quests accepted, completed, failed

Adventurers and informants met

Designed to be serialization-ready for future save/load integration.


🔨 **Recent Fixes \& Improvements**

Fixed: Infinite purchase bug for Starting Table by tracking PurchasedItems.

Fixed: Seat count for Starting Table now correctly set to 2.

Improved: Tooltip feedback for locked or capped items.

Improved: Table cap logic is now fully dynamic and upgradeable.

